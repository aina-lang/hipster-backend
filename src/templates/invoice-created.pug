extends layout

block content
  div(style="margin-bottom: 32px;")
    h2 üíº #{typeLabel || 'Document'} disponible
    p Bonjour #{clientName}, une nouvelle #{typeLabel ? typeLabel.toLowerCase() : 'facture'} a √©t√© g√©n√©r√©e pour vous.

  div(style="background-color: #ffffff; border: 1px solid #e4e4e7; border-radius: 12px; padding: 24px; margin: 32px 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1);")
    div(style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f4f4f5; padding-bottom: 16px; margin-bottom: 20px;")
      div(style="font-size: 18px; font-weight: 700; color: #09090b;") #{invoiceReference}
      div(style="background-color: #f4f4f5; color: #71717a; padding: 4px 12px; border-radius: 6px; font-size: 11px; text-transform: uppercase; font-weight: 600; border: 1px solid #e4e4e7;") #{status}
    
    div.details(style="font-size: 14px; color: #52525b;")
      if projectName
        div(style="display: flex; justify-content: space-between; margin-bottom: 8px;")
          span Projet
          span(style="color: #18181b; font-weight: 500;") #{projectName}
      if dueDate
        div(style="display: flex; justify-content: space-between;")
          span √âch√©ance
          span(style="color: #18181b; font-weight: 500;") #{dueDate}

    if items && items.length > 0
      table(style="width: 100%; border-collapse: collapse; margin: 24px 0;")
        thead
          tr
            th(style="text-align: left; font-size: 11px; color: #a1a1aa; text-transform: uppercase; padding: 12px 0; border-bottom: 1px solid #f4f4f5;") Description
            th(style="text-align: right; font-size: 11px; color: #a1a1aa; text-transform: uppercase; padding: 12px 0; border-bottom: 1px solid #f4f4f5;") Total
        tbody
          each item in items
            tr
              td(style="padding: 12px 0; border-bottom: 1px solid #f8f9fa; font-size: 14px; color: #27272a;") #{item.description}
              td(style="text-align: right; padding: 12px 0; border-bottom: 1px solid #f8f9fa; font-size: 14px; color: #09090b; font-weight: 500;") #{(item.quantity * item.unitPrice).toFixed(2)}‚Ç¨

    div(style="border-top: 1px solid #f4f4f5; padding-top: 16px; margin-top: 16px;")
      div(style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; color: #71717a;")
        span Sous-total HT
        span #{subtotal}‚Ç¨
      if tax
        div(style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; color: #71717a;")
          span TVA
          span #{tax}‚Ç¨
      div(style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 700; color: #09090b; margin-top: 12px; padding-top: 12px; border-top: 2px solid #09090b;")
        span Total
        span #{amount}‚Ç¨

  if notes
    div(style="background-color: #f8f9fa; border-left: 3px solid #09090b; padding: 16px; border-radius: 4px; margin: 24px 0;")
      p(style="margin: 0; font-size: 13px; color: #71717a; font-style: italic;") üìù Note: #{notes}

  div(style="text-align: center; margin-top: 32px;")
    a.btn(href=invoiceUrl style="margin: 8px;") üìÑ Consulter en ligne
    | &nbsp;&nbsp;
    a.btn(href=pdfDownloadUrl || invoiceUrl style="margin: 8px; background-color: #1a1a1a; color: #ffffff; border: 1px solid #262626;") ‚¨áÔ∏è PDF
    if mobileAppUrl
      div(style="margin-top: 16px;")
        a(href=mobileAppUrl style="color: #71717a; text-decoration: none; font-size: 12px;") üì± Ouvrir dans l'application mobile
